= About Object Store V2
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../assets/images/

Object Store v2 lets CloudHub applications store data and states across batch processes, Mule components and applications, from within an application.

Object Store v2 can be selected as the implementation for Mule 3 and Mule 4 in CloudHub by _checking the "Object Store V2" checkbox in Runtime Manager at deployment time_ (redacted content which implies v2 and v1 have different Mule-coding patterns/usages, which they don't). See the xref:osv2-faq.adoc[FAQ] for Object Store information.

image::osv2-architecture.png[width=300]

On-premise Mule applications cannot not use Object Store v2 at all. 

Object Store v2 features:

* keys persist for 30 days unless updated. If a key is updated, the TTL (time-to-live) is extended by another 30 days. For more information, see xref:osv2-faq.adoc#how-long-can-data-persist-in-osv2[How long can data persist in Object Store v2?].
* Unlimited number of entries. There is no limit on the total size of v2 object-stores
* Stores values up to 10 MB (when Base64 encoded) in size. You can estimate base64 size of a payload as follows: CEILING(base10size * 1024/3) * 4, where base10size is object size in bytes. 
+ Example: A base10 payload size of 7.5 MB converts to 10.24 MB base64.
+ 
* available in all supported regions and availability zones within each region.
* is co-located in the same region as your workers. For example workers hosted in Singapore would use Object Store v2  hosted in Singapore.
* it has a Mule connector and REST interface for access by external applications.
* End-to-end secure TLS-transport.
* Persistent storage is encrypted to FIPS 140-2 compliant standards
* Confirmable timeout to enable rollbacks (what does this mean? It needs to be explained, otherwise developers don't know how to take advantage of this feature).

The existing Object Store Connector is used to write to the object store, regardless of whether v1 or v2 is being used

Object Store v2 contains a user interface available in the Anypoint Platform > Runtime Manager.

== Upgrade to Object Store v2

* Back up all the data in your current object store.
+
IMPORTANT: Data does not carry over from Object Store v1 to v2.  Any data in a v1 object store, including watermarks and other Mule component states, does not move to v2. If you revert to OSv1, your OSv1 data will still be there.
+
* To access Object Store v2, in Anypoint Platform, click *Runtime Manager*. Click the name of your application to view the application's dashboard, and click *Manage Application*. In the *Settings* screen, click *Use Object Store v2*. Accept the prompt. The *Application Data* section of the Runtime Manager's dashboard changes to *Object Store*.
+
image::os-use-object-store-v2.png[Click Use Object Store V2 in the Runtime Manager]

== Object Store Notes

* For Object Store v2 region availability see xref:osv2-faq.adoc#where-is-osv2-available[Where is Object Store v2 available?] in the FAQ.
* The Object Store Connector works for both Object Store version 1 and 2.
* Object Store v2 enforces a maximum data persistence of 30 days from time of creation.
* Accounts that have not purchased the Object Store v2 premium SKU are rate limited to 10 transactions per second per application. To go beyond the base 10 TPS rate limit, contact your MuleSoft account team.
* For CloudHub applications using Mule 4, if you choose Object Store v2, Object Store v2 overrides the `_defaultPersistentObjectStore` object store.
+
For CloudHub applications using Mule 3, Object Store v2 overrides the `_defaultUserObjectStore` object store. To use Object Store v2 in Mule 3 CloudHub applications, set the Object Store reference field to the `_defaultUserObjectStore` value.

== See Also

* xref:osv2-faq.adoc[Object Store v2 FAQ]
* xref:release-notes::object-store/anypoint-osv2-release-notes.adoc[Object Store v2 Release Notes]
* xref:osv2-guide.adoc[To Use Object Store v2]
* xref:osv2-tutorial.adoc[Tutorial: Object Store v2]
* xref:osv2-apis.adoc[REST API: Object Store v2]
* xref:3.9@mule-runtime::object-store-connector.adoc[Mule 3 Object Store Connector]
* https://blogs.mulesoft.com/dev/anypoint-platform-dev/data-synchronizing-made-easy-with-mule-watermarks/[Object Store Watermarks]
